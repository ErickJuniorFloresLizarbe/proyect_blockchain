<div class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
    <div class="bg-gray-900 rounded-xl shadow-2xl w-full max-w-md md:max-w-2xl overflow-hidden animate-slideIn">

        <!-- Header -->
        <div class="flex justify-between items-center p-4 md:p-6 border-b border-gray-800">
            <h3 class="text-lg md:text-xl font-bold text-white">Seleccionar Wallet</h3>
            <button (click)="close.emit()" class="text-gray-400 hover:text-white transition-colors p-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Content -->
        <div class="p-4 md:p-6">
            <!-- Error message -->
            <div *ngIf="errorMessage"
                class="mb-4 p-3 md:p-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200 text-sm md:text-base">
                <div class="flex items-start">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 mr-2 mt-0.5 flex-shrink-0"
                        viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>{{ errorMessage }}</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                <!-- MetaMask -->
                <button (click)="connectMetaMask()" [disabled]="isLoading"
                    class="flex items-center w-full p-3 md:p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <div
                        class="w-10 h-10 md:w-12 md:h-12 bg-white rounded-lg flex items-center justify-center mr-3 md:mr-4 flex-shrink-0 overflow-hidden">
                        <img src="https://pjfcuropecvzfclpxgeq.supabase.co/storage/v1/object/public/criptopay//metamask.png" alt="MetaMask"
                            class="w-8 h-8 md:w-10 md:h-10" />
                    </div>
                    <div class="text-left">
                        <div class="text-white font-medium text-sm md:text-lg">MetaMask</div>
                        <div class="text-gray-400 text-xs md:text-sm">Conectar con MetaMask</div>
                    </div>
                </button>

                <!-- Rainbow -->
                <button (click)="selectWallet.emit('rainbow')" [disabled]="isLoading"
                    class="flex items-center w-full p-3 md:p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <div
                        class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 rounded-lg flex items-center justify-center mr-3 md:mr-4 flex-shrink-0">
                        <svg class="w-6 h-6 md:w-8 md:h-8 text-white" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4H20V20H4V4Z" fill="white" />
                            <path
                                d="M12 17.75C15.1756 17.75 17.75 15.1756 17.75 12C17.75 8.82436 15.1756 6.25 12 6.25C8.82436 6.25 6.25 8.82436 6.25 12C6.25 15.1756 8.82436 17.75 12 17.75Z"
                                stroke="black" stroke-width="1.5" />
                            <path
                                d="M12 14.75C13.5188 14.75 14.75 13.5188 14.75 12C14.75 10.4812 13.5188 9.25 12 9.25C10.4812 9.25 9.25 10.4812 9.25 12C9.25 13.5188 10.4812 14.75 12 14.75Z"
                                stroke="black" stroke-width="1.5" />
                        </svg>
                    </div>
                    <div class="text-left">
                        <div class="text-white font-medium text-sm md:text-lg">Rainbow</div>
                        <div class="text-gray-400 text-xs md:text-sm">Conectar con Rainbow Wallet</div>
                    </div>
                </button>

                <!-- WalletConnect -->
                <button (click)="selectWallet.emit('walletconnect')" [disabled]="isLoading"
                    class="flex items-center w-full p-3 md:p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <div
                        class="w-10 h-10 md:w-12 md:h-12 bg-blue-500 rounded-lg flex items-center justify-center mr-3 md:mr-4 flex-shrink-0">
                        <svg class="w-6 h-6 md:w-8 md:h-8" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6.42 9.87C9.19 7.09 13.81 7.09 16.58 9.87L16.95 10.24C17.13 10.42 17.13 10.71 16.95 10.89L15.82 12.02C15.73 12.11 15.59 12.11 15.5 12.02L15 11.53C13.12 9.64 9.88 9.64 8 11.53L7.47 12.06C7.38 12.15 7.24 12.15 7.15 12.06L6.02 10.93C5.84 10.75 5.84 10.46 6.02 10.28L6.42 9.87ZM19.17 12.47L20.16 13.46C20.34 13.64 20.34 13.93 20.16 14.11L15.83 18.44C15.65 18.62 15.36 18.62 15.18 18.44L12.17 15.44C12.12 15.39 12.05 15.39 12 15.44L8.99 18.44C8.81 18.62 8.52 18.62 8.34 18.44L4 14.11C3.82 13.93 3.82 13.64 4 13.46L4.99 12.47C5.17 12.29 5.46 12.29 5.64 12.47L8.65 15.47C8.7 15.52 8.77 15.52 8.82 15.47L11.83 12.47C12.01 12.29 12.3 12.29 12.48 12.47L15.49 15.47C15.54 15.52 15.61 15.52 15.66 15.47L18.67 12.47C18.85 12.29 19.14 12.29 19.32 12.47H19.17Z"
                                fill="white" />
                        </svg>
                    </div>
                    <div class="text-left">
                        <div class="text-white font-medium text-sm md:text-lg">WalletConnect</div>
                        <div class="text-gray-400 text-xs md:text-sm">Escanea con tu wallet móvil</div>
                    </div>
                </button>

                <!-- Coinbase Wallet -->
                <button (click)="selectWallet.emit('coinbase')" [disabled]="isLoading"
                    class="flex items-center w-full p-3 md:p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <div
                        class="w-10 h-10 md:w-12 md:h-12 bg-blue-600 rounded-lg flex items-center justify-center mr-3 md:mr-4 flex-shrink-0">
                        <svg class="w-6 h-6 md:w-8 md:h-8 text-white" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                                fill="white" />
                            <path
                                d="M12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6Z"
                                fill="#2059EB" />
                        </svg>
                    </div>
                    <div class="text-left">
                        <div class="text-white font-medium text-sm md:text-lg">Coinbase Wallet</div>
                        <div class="text-gray-400 text-xs md:text-sm">Conectar con Coinbase Wallet</div>
                    </div>
                </button>
            </div>

            <!-- Mensaje de seguridad -->
            <div class="mt-4 md:mt-6 text-center text-gray-400 text-xs md:text-sm">
                <p>Tu información está segura. No almacenamos tus llaves privadas.</p>
            </div>

            <!-- Sugerencia para nuevos usuarios -->
            <div class="mt-4 md:mt-6 bg-gray-800 p-3 md:p-4 rounded-lg">
                <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 text-blue-400"
                            viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h4 class="text-xs md:text-sm font-medium text-blue-400">¿Nuevo en Ethereum?</h4>
                        <p class="mt-1 text-xs md:text-sm text-gray-400">
                            Si no tienes una wallet, puedes descargar MetaMask desde su sitio oficial. Es fácil de
                            configurar y usar.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <app-loading-modal *ngIf="isLoading"></app-loading-modal>
</div>